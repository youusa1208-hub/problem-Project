package dao;

import beans.PmBean;
import java.sql.*;
import javax.naming.*;

public class PmDao extends Dao {

//	引数の名前とパスワードに一致するデータがある場合→PmBeanのインスタンスを返す
//					一致するデータがない場合→nullを返す
	public PmBean search(String n,String p)
			throws NamingException,SQLException{
		String sql = "SELECT * FROM pmaster"
					+"WHERE pmname=? AND pmpass?";
		PreparedStatement stmt = prepareStatement(sql);
		stmt.setString(1, n);
		stmt.setString(2, p);
		ResultSet rs = stmt.executeQuery();
		PmBean pb = null;
		if(rs.next()){
//			データがあるので、インスタンスを生成
			pb = new PmBean();
			pb.setPmid(rs.getInt("pmid"));
			pb.setPmname(rs.getString("pmname"));
			pb.setPmpass(rs.getString("pmpass"));
		}
		return pb;
	}
	
}
